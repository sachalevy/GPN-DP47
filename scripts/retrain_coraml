#!/bin/bash
#SBATCH --job-name=gpn-retrain
#SBATCH --output=job_output.txt
#SBATCH --error=job_error.txt
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=6         # Ask for 6 CPUs
#SBATCH --gres=gpu:1              # Ask for 1 GPU
#SBATCH --mem=20G                 # Ask for 10 GB of RAM
#SBATCH --time=3:00:00            # The job will run for 10 minutes

module load python/3.7
module load pytorch/1.8.1

rm -rf $HOME/rdp47
virtualenv $HOME/rdp47
source $HOME/rdp47/bin/activate
pip install -r cluster_req.txt

python3 train_and_eval.py with configs/gpn/new_classification_gpn_16.yaml data.dataset=CoraML
echo "done training algorithm"